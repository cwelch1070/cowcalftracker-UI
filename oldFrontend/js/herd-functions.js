//HANDLES NAMING OF HERD
const nameHerd = () => {

    const herdData = {
        name: ''
    }

    //Defines event handlers
    const nameHerd = document.querySelector('#herd-name')
    const saveButton = document.querySelector('#save-herd')
   
    //Captures input from user and stores it in name
    nameHerd.addEventListener('input', (e) => {
        herdData.name = e.target.value
    })
    
    //FETCH REQUEST TO SERVER TO CREATE HERD
    saveButton.addEventListener('click', async (e) => {
        const response = await fetch('http://localhost:3001/herd', {
            method: 'POST',
            mode: 'cors',
            body: JSON.stringify({
                name: herdData.name
            }),
            headers: {
                'Content-Type': 'application/json',
                'Authorization': getToken()
            }
        })
        const data = await response.json()
        console.log(data)

        location.reload()
    })
}

//FETCH THE HERD DATA FROM SERVER
const getHerdData = async () => {
    const response = await fetch('http://localhost:3001/herd', {
        method: 'GET',
        mode: 'cors',
        headers: {
            'Authorization': getToken(),
            'Content-Type': 'application/json'  
        }
    })

    const data = await response.json()

    return data
}

// Clears the html generated by the previous button click inside the table only
// Prevents the redisplaying of the cattle each time button is clicked
const clearHTML = () => {
    document.getElementById('table1').innerHTML = "" 
    document.getElementById('table2').innerHTML = ""
}